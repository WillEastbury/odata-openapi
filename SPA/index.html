<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Odata to OpenAPI3</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	</head>
	<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-12">
				<nav class="navbar navbar-expand-lg navbar-primary bg-light">
					<div class="container-fluid">
					 <a class="navbar-brand" href="#">Odata to OpenAPI3 Converter</a>
					</div>
				</nav>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<form>
					<div class="accordion" id="accordionExample">
						<div class="accordion-item">
							<h2 class="accordion-header" id="headingOne">
							<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
								Odata Definition
							</button>
							</h2>
							<div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
								<div class="accordion-body">
									<div class="mb-3">
										<label for="exampleInputOdata1" class="form-label">Input Odata Definition</label>
										<textarea class="form-control" id="exampleInputOdata1" aria-describedby="OdataHelp"></textarea>
										<div id="OdataHelp" class="form-text">We will transmit your Odata definition to our API backend, but we will never store your Odata Definition.</div>
									</div>
									<button type="button" onclick="getConversion()" data-bs-target="#headingThree" class="btn btn-primary">Convert</button>
								</div>
							</div>
						</div>
						<div class="accordion-item">
							<h2 class="accordion-header" id="headingTwo">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
								Optional Parameters
							</button>
							</h2>
							<div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
								<div class="accordion-body">
									<div class="mb-3">
										<label for="examplescheme1" class="form-label">Optional scheme</label>
										<input type="text" class="form-control" id="exampleinputscheme1" aria-describedby="Odatascheme" placeholder="https"/>
										<div id="Odatascheme" class="form-text">Optionally override the scheme in your definition to a custom one.</div>
									</div>
									<div class="mb-3">
										<label for="examplehost1" class="form-label">Optional Host</label>
										<input type="text" class="form-control" id="exampleinputhost1" aria-describedby="Odatahost" placeholder="services.odata.org"/>
										<div id="Odatahost" class="form-text">Optionally override the host in your definition to a custom one.</div>
									</div>
									<div class="mb-3">
										<label for="examplebasepath1" class="form-label">Optional basepath</label>
										<input type="text" class="form-control" id="exampleinputbasepath1" aria-describedby="Odatabasepath" placeholder="/service-root"/>
										<div id="Odatabasepath" class="form-text">Optionally override the base path in your definition to a custom one.</div>
									</div>	
								</div>
							</div>
						</div>
						<div class="accordion-item">
							<h2 class="accordion-header" id="headingThree">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
								Result
							</button>
							</h2>
							<div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
								<div class="accordion-body">
									<div class="mb-3">
										<label for="exampleoutput1" class="form-label">Converted Result</label>
										<textarea class="form-control" id="exampleoutput1"></textarea>
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
	<script>

		function getConversion()
		{
			const apilocation = "https://test12345676890.willsv3test.p.azurewebsites.net/api/HttpTrigger1"; 
			const options = {
				method: 'POST',
				body: document.getElementById('exampleInputOdata1').value,
				headers: {
					'Content-Type': 'application/json',
					'x-scheme': document.getElementById('exampleinputscheme1').value,
					'x-basepath': document.getElementById('exampleinputbasepath1').value,
					'x-host': document.getElementById('exampleinputhost1').value
				}
			}
			fetch(apilocation, options)
				//.then(res => console.log(res))
				.then(res => res.text())
				.then(res => document.getElementById('exampleoutput1').value = res);
			
		}
	</script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </body>
</html>
